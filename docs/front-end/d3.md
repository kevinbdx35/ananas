---
sidebar_position: 8
---

# Visusalisation des données avec la librairie D3

* [**D3.js**](https://d3js.org)

D3, ou D3.js, signifie **Data Driven Documents**, c'est une librairie Javascript permettant de créer des visualisation de données dynamiques et interactives dans ton navigateur.
Elle est très populaire, robuste et avec de nombreuses fonctionnalités. Apprendre à l'utiliser sera un réel plus sur ton cv.

D3 est conçu pour fonctionner avec les normes Web courantes, à savoir HTML, CSS et Scalable Vector Graphics (SVG).

D3 prend en charge de nombreux types de formats de données d'entrée. Ensuite, à l'aide de ses puissantes méthodes intégrées, tu peux transformer ces données en différents tableaux, graphiques et cartes.

La visualisation des données est une représentation graphique et logique de données afin que ces dernières puissent être mise en valeur et les rendre plus parlantes qu'uniquement des chiffres qui sont plus difficiles à interprêter quand la quantité est énorme.

* [Exemple de visualisation de données avec D3.js](http://www.brandlovescore.com/blackfriday2017/#bf)

## Installation

Il existe plusieurs manière de mettre en oeuvre cette librairie. Ici, tu vas utiliser le CDN. Si tu souhaites utiliser une autre mnanière tu peux aller lire la documentation [**Installation**](https://github.com/d3/d3/blob/main/README.md#installing)

```html {9,11}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3.js Project</title>

    <script src="https://cdn.jsdelivr.net/npm/d3@7" defer></script>

    <script src="main.js" defer></script>

</head>
<body>
    <div class = "box"></div>
</body>
</html>
```

Tu implémentes les balises scripts pour appeler le `CDN` et la page de ton code javascript `main.js` dans le `head` de ton HTML en ajoutant l'attribut `defer` qui permet d'indiquer au navigateur de ne pas attendre le script pour charger le reste du DOM.

C'est la meilleure manière et la plus rapide de faire appelle à du script.

Tu as aussi mis une `div` avec une `class`.

## Select et SelectAll

Tu vas maintenant essentiellement travailler dans ta page javascript `main.js`.

Tu vas voir comment 

```js title="ici, tu selectionnes uniquement l'élément ayant la class .box"
const box = d3.select(`.box`);
```

```js title="ici, tu selectionnes tous les éléments div"
const div = d3.selectAll("div");
```

## Append

`append` te permet d'ajouter des éléments. Ici, tu déclares trois éléments, un rectangle, une ligne et un cercle.

```js {5-7}
const box = d3.select(`.box`);

const svg = box.append('svg');

svg.append('rect');
svg.append('line');
svg.append('circle');
```

## La méthode attr

C'est la méthode attribut `attr`, qui permet d'ajouter des attributs par exemple à tes svg.

```js {5-6} title="Tu crées en ajout les attributs height et width ton envinonnement de travail"
const box = d3.select(`.box`);

const svg = box.append('svg');

svg.attr('height', 500);
svg.attr('width', 500);

svg.append('rect');
svg.append('line');
svg.append('circle');
```

### Enchaîner les méthodes

Pour gagner de la place et des lignes, tu peux enchaîner les méthodes comme dans l'exemple suivant.

```js {3}
const box = d3.select(`.box`);

const svg = box.append('svg').attr('height', 500).attr('width', 500);

svg.append('rect');
svg.append('line');
svg.append('circle');
```

Une meilleure manière d'écrire la même chose pour que ça soit plus lisible.

```js {3-5}
const box = d3.select(`.box`);

const svg = box.append('svg')
    .attr('height', 500)
    .attr('width', 500);

svg.append('rect');
svg.append('line');
svg.append('circle');
```

Maintenant, tu vas ajouter des attributs à tes éléments svg.

```js {7-12,14-19,21-25}
const box = d3.select(`.box`);

const svg = box.append('svg')
    .attr('height', 500)
    .attr('width', 500);

svg.append('rect')
    .attr('height', 75)
    .attr('width', 100)
    .attr('fill', 'blue')
    .attr('x', 100)
    .attr('y', 100);

svg.append('line');
    .attr('x1', 50)
    .attr('y1', 200)
    .attr('x2', 150)
    .attr('y2', 250)
    .attr('stroke', 'green');

svg.append('circle');
    .attr('r', 75)
    .attr('cx', 100)
    .attr('cy', 150)
    .attr('fill', 'orange');
```

## Les groupes de SVG

Tu vas voir qu'il est intéressant de faire des groupes de svg.

```js {7,9,16,23}
const box = d3.select(`.box`);

const svg = box.append('svg')
    .attr('height', 500)
    .attr('width', 500);

const groupe = svg.append('g');    

groupe.append('rect')
    .attr('height', 75)
    .attr('width', 100)
    .attr('fill', 'blue')
    .attr('x', 100)
    .attr('y', 100);

groupe.append('line');
    .attr('x1', 50)
    .attr('y1', 200)
    .attr('x2', 150)
    .attr('y2', 250)
    .attr('stroke', 'green');

groupe.append('circle');
    .attr('r', 75)
    .attr('cx', 100)
    .attr('cy', 150)
    .attr('fill', 'orange');
```

C'est très pratique, car tu peux ainsi ajouter des attributs à l'ensemble des formes dessinées en `svg` en les ajoutant directement au groupe.
Dans l'exemple suivant, tu vas déplacer ainsi tous tes éléments en une ligne.

```js {8}
const box = d3.select(`.box`);

const svg = box.append('svg')
    .attr('height', 500)
    .attr('width', 500);

const groupe = svg.append('g')
    .attr('transform', 'translate(0, 100');

groupe.append('rect')
    .attr('height', 75)
    .attr('width', 100)
    .attr('fill', 'blue')
    .attr('x', 100)
    .attr('y', 100);

groupe.append('line');
    .attr('x1', 50)
    .attr('y1', 200)
    .attr('x2', 150)
    .attr('y2', 250)
    .attr('stroke', 'green');

groupe.append('circle');
    .attr('r', 75)
    .attr('cx', 100)
    .attr('cy', 150)
    .attr('fill', 'orange');
```

## Manipulation de nos premières données

Bientôt
